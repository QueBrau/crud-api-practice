# crud-api-practice
Simple CRUD API for Animal Objects with JPA (Hibernate)

### Version
1.0.0

## Installation
- Get the project
    - clone
        ```
      git clone https://github.com/QueBrau/crud-api-practice.git
        ```
    - OR download zip.
- Open the project in VS Code.
- This project is built to run with jdk 17 or higher.
- Dependencies to JPA and Postgres in addition to the usual Spring Web. JPA handles the persistence, Postgresql is the database to be used.
- `/src/main/resources/application.properties` This file has the configuration for the PostgreSQL database to use for the API.
  - You MUST have the database up and running before running the project!
    - Configure your PostgreSQL database connection.
    - Update the connection string in `application.properties`.
    - Set `spring.datasource.url`, `spring.datasource.username`, and `spring.datasource.password`.
- Build and run the main class. You should see a new table created in the database.
    ```
  ./mvnw spring-boot:run
    ```

## API Endpoints
Base URL: [`http://localhost:8080/animals`](http://localhost:8080/animals)

1. ### [`/`](http://localhost:8080/animals) (GET)
Gets a list of all Animals in the database.

#### Response - A JSON array of Animal objects.

 ```
[
  {
    "animalId": 2,
    "name": "Axolotl",
    "description": "Axolotls are aquatic salamanders native to Mexico, famous for their ability to regenerate limbs. They have external gills and remain in their larval stage throughout their lives.",
    "origin": "Mexico City",
    "dangerLevel": "Non-existent"
  },
  {
    "animalId": 3,
    "name": "Jaguar",
    "description": "Jaguars are large, powerful cats native to the Americas. They are known for their distinctive spotted coats and are excellent swimmers and hunters.",
    "origin": "The Americas",
    "dangerLevel": "High"
  }
]
```

2. ### [`/{animalId}`](http://localhost:8080/animals/3) (GET)
Gets an individual Animal in the system. Each Animal is identified by a numeric `animalId`

#### Parameters
- Path Variable: `animalId` &lt;Long &gt; - REQUIRED

#### Response - A single Animal

```
  {
    "animalId": 3,
    "name": "Jaguar",
    "description": "Jaguars are large, powerful cats native to the Americas. They are known for their distinctive spotted coats and are excellent swimmers and hunters.",
    "origin": "The Americas",
    "dangerLevel": "High"
  }
```

3. ### [`/name`](http://localhost:8080/animals/name?name=Axolotl) (GET)
Gets a list of animals with a name that matches the given string.

#### Parameters
- query parameter: `name` &lt; String &gt; - REQUIRED

#### Response - A JSON array of Animal objects.

```
[
  {
    "animalId": 2,
    "name": "Axolotl",
    "description": "Axolotls are aquatic salamanders native to Mexico, famous for their ability to regenerate limbs. They have external gills and remain in their larval stage throughout their lives.",
    "origin": "Mexico City",
    "dangerLevel": "Non-existent"
  },
  {
    "animalId": 1,
    "name": "Axolotl",
    "description": "Axolotls are aquatic salamanders native to Mexico, famous for their ability to regenerate limbs. They have external gills and remain in their larval stage throughout their lives.",
    "origin": "Mexico City",
    "dangerLevel": "No"
  }
]
```

4. ### [`/danger/{dangerLevel}`](http://localhost:8080/animals/danger/High) (GET)
Gets a list of animals for a named danger level.

#### Parameters
- path variable: `dangerLevel` &lt; String &gt; - REQUIRED

#### Response - A JSON array of Animal objects.

```
[
  {
    "animalId": 3,
    "name": "Jaguar",
    "description": "Jaguars are large, powerful cats native to the Americas. They are known for their distinctive spotted coats and are excellent swimmers and hunters.",
    "origin": "The Americas",
    "dangerLevel": "High"
  }
]
```

5. ### [`/`](http://localhost:8080/animals) (POST)
Create a new Animal entry

#### Request Body
An animal object. Note the object does not include an ID as this is autogenerated.
```
{
  "name": "Monarch Butterfly",
  "description": "Monarch butterflies are known for their incredible migration journey and distinctive orange and black wings.",
  "origin": "North America",
  "dangerLevel": "No"
}
```
#### Response - The newly created Animal.

```
  {
    "animalId": 5,
    "name": "Monarch Butterfly",
    "description": "Monarch butterflies are known for their incredible migration journey and distinctive orange and black wings.",
    "origin": "North America",
    "dangerLevel": "No"
  }
```

6. ### [`/{animalId}`](http://localhost:8080/animals/2) (PUT)
Update an existing Animal.

#### Parameters
- Path Variable: `animalId` &lt;Long&gt; - REQUIRED

#### Request Body
An animal object with the updates.
```
{
  "name": "Axolotl",
  "description": "Axolotls are critically endangered aquatic salamanders native to Mexico, famous for their ability to regenerate limbs.",
  "origin": "Lake Xochimilco, Mexico",
  "dangerLevel": "No"
}
```
#### Response - the updated Animal object.
```
{
  "animalId": 2,
  "name": "Axolotl",
  "description": "Axolotls are critically endangered aquatic salamanders native to Mexico, famous for their ability to regenerate limbs.",
  "origin": "Lake Xochimilco, Mexico",
  "dangerLevel": "No"
}
```

7. ### [`/{animalId}`](http://localhost:8080/animals/4) (DELETE)
Delete an existing Animal.

#### Parameters
- Path Variable: `animalId` &lt;Long&gt; - REQUIRED

#### Response - the updated list of Animals.
```
[
  {
    "animalId": 2,
    "name": "Axolotl",
    "description": "Axolotls are aquatic salamanders native to Mexico, famous for their ability to regenerate limbs. They have external gills and remain in their larval stage throughout their lives.",
    "origin": "Mexico City",
    "dangerLevel": "Non-existent"
  },
  {
    "animalId": 3,
    "name": "Jaguar",
    "description": "Jaguars are large, powerful cats native to the Americas. They are known for their distinctive spotted coats and are excellent swimmers and hunters.",
    "origin": "The Americas",
    "dangerLevel": "High"
  }
]
```

8. ### [`/writeFile`](http://localhost:8080/animals/writeFile) (POST)
Write an Animal object to a JSON file on the server.

#### Request Body
An animal object to write to file.
```
{
  "name": "Golden Eagle",
  "description": "Golden Eagles are large birds of prey found in the Northern Hemisphere. They are known for their keen eyesight, powerful talons, and impressive hunting skills.",
  "origin": "North America",
  "dangerLevel": "low"
}
```
#### Response - Success message.
```
"Animal written to JSON file successfully"
```

9. ### [`/readFile`](http://localhost:8080/animals/readFile) (GET)
Read an Animal object from a JSON file on the server.

#### Response - An Animal object from file.
```
{
  "animalId": null,
  "name": "Golden Eagle",
  "description": "Golden Eagles are large birds of prey found in the Northern Hemisphere. They are known for their keen eyesight, powerful talons, and impressive hunting skills.",
  "origin": "North America",
  "dangerLevel": "low"
}
```